#!/bin/sh
#
# Install Node packages in the node-packages.txt package list.

set -u

node=$(which node 2> /dev/null)
if [ -z "${node}" ] || [ ! -x "${node}" ]; then
    echo "error: node is not installed, skipping node module installation"
    exit 1
fi

npm=$(which npm 2> /dev/null)
if [ -z "${npm}" ] || [ ! -x "${npm}" ]; then
    echo "error: npm is not installed, skipping node module installation"
    exit 1
fi

node_packages=$(grep -v "^#" node-packages.txt)
for m in ${node_packages} ; do
    ${npm} install --global --prefix="${HOME}"/.node_modules "${m}"
done
