#!/bin/sh
#
# Install interesting packages for Debian.
#
# This assumes that the current user is the user used to install
# packages and has the proper administrator privileges.

set -e
set -u

# install aptitude
sudo apt-get -q -y install aptitude

# package manager
pm=
pm_check=
pm_update=
pm_upgrade=
pm_install=
pm_cleanup=

# check if aptitude is installed
if [ -z "$(which aptitude 2> /dev/null)" ]; then
    echo "warning: aptitude not found"
else
    pm="aptitude"
    pm_check="true"
    pm_update="sudo ${pm} update"
    pm_upgrade="sudo ${pm} safe-upgrade"
    pm_install="sudo apt-get -q -y install"
    pm_cleanup="sudo ${pm} clean"
fi

# check if package manager is installed
if [ -z "${pm}" ]; then
    echo "error: Package manager not found."
    exit 1
fi

# additional repositories
${pm_install} curl

curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash

# update and check packages
${pm_update}
if ! ${pm_check} ; then
    echo "warning: Package manager check failed, continue anyway (y/n)?: \c"
    read -r yn
    if [ "${yn}" != "y" ]; then
	exit 1
    fi
fi
${pm_update}

# upgrade existing packages
${pm_upgrade}

# install packages for homedir installer
${pm_install} wget
${pm_install} stow
${pm_install} diffutils

# install interpreters prior to other packages
${pm_install} python
${pm_install} python-dev
${pm_install} python3
${pm_install} python3-dev
${pm_install} ruby
${pm_install} ruby-dev

# install version control systems
${pm_install} git
${pm_install} subversion

# install basic tools
${pm_install} autoconf
${pm_install} tar
${pm_install} bzip2
${pm_install} patch

# install fuse
${pm_install} fuse
#${pm_install} gitfs
${pm_install} sshfs

# install all taps with the right options
${pm_install} arp-scan
#${pm_install} arp-sk
#${pm_install} arpoison
${pm_install} aspell
#${pm_install} atom
${pm_install} avahi-autoipd
${pm_install} avahi-daemon
${pm_install} avahi-utils
#${pm_install} avrdude
#${pm_install} avr-binutils
#${pm_install} avr-gcc
${pm_install} bash-completion
#${pm_install} bear
${pm_install} libboost-all-dev
#${pm_install} libboost-bcp-dev
${pm_install} libboost-tools-dev
#${pm_install} casperjs
${pm_install} cflow
#${pm_install} chefdk
${pm_install} clang
#${pm_install} clblas
#${pm_install} clfft
#${pm_install} clinfo
${pm_install} cmake
${pm_install} cppcheck
${pm_install} dfu-util
#${pm_install} dns2tcp
#${pm_install} dnstop
#${pm_install} docbook
#${pm_install} docbook-xsl
#${pm_install} docker
${pm_install} doxygen
#${pm_install} e2fsprogs
${pm_install} emacs24-nox
#${pm_install} emscripten
${pm_install} enscript
#${pm_install} ext2fuse
#${pm_install} fop
#${pm_install} fortune
${pm_install} gcc
${pm_install} g++
#${pm_install} gcc48
#${pm_install} g++-4.8
#${pm_install} gcc49
#${pm_install} g++-4.9
#${pm_install} gcc5
#${pm_install} g++-5
#${pm_install} gcc6
#${pm_install} g++-6
#${pm_install} gcc7
#${pm_install} g++-7
#${pm_install} gcc8
#${pm_install} g++-8
${pm_install} gdb
#${pm_install} gem-completion
#${pm_install} git-flow
#${pm_install} git-hooks
${pm_install} git-lfs
${pm_install} git-svn
#${pm_install} git-test
#${pm_install} github-desktop
#${pm_install} glew
#${pm_install} glfw3
#${pm_install} glib
#${pm_install} glm
${pm_install} global
#${pm_install} glslang
#${pm_install} gnu-typist
${pm_install} gnuplot
${pm_install} golang
${pm_install} gnupg
#${pm_install} graphviz
${pm_install} guile-2.0
#${pm_install} hadolint
${pm_install} hdf5-tools
${pm_install} libhdf5-dev
${pm_install} libhdf5-doc
${pm_install} highlight
${pm_install} htop
#${pm_install} httping
#${pm_install} httpry
${pm_install} iperf
${pm_install} ipv6calc
${pm_install} jam
#${pm_install} jansson
#${pm_install} jasper
#${pm_install} jpeg
#${pm_install} jrnl
#${pm_install} jsl
#${pm_install} jsmin
#${pm_install} json-c
#${pm_install} jsonpp
#${pm_install} kubernetes-cli
#${pm_install} launchctl-completion
#${pm_install} legit
${pm_install} libclang-dev
${pm_install} libnss-mdns
#${pm_install} lldb
#${pm_install} lld
${pm_install} llvm
#${pm_install} llvm35
#${pm_install} llvm36
#${pm_install} llvm37
#${pm_install} llvm39
#${pm_install} llvm4
${pm_install} llvm-dev
${pm_install} llvm-runtime
${pm_install} lrzsz
${pm_install} man-db
#${pm_install} markdown
${pm_install} maven
#${pm_install} mscgen
#${pm_install} netcat
#${pm_install} netperf
${pm_install} nmap
${pm_install} nodejs
${pm_install} nodejs-dev
#${pm_install} npm
#${pm_install} ntfs-3g
${pm_install} ntp
${pm_install} nuttcp
#${pm_install} open-completion
${pm_install} openocd
${pm_install} openssh-client
${pm_install} openssh-server
#${pm_install} osxfuse
#${pm_install} p0f
#${pm_install} p7zip
#${pm_install} parallel
#${pm_install} phantomjs
#${pm_install} pinentry
#${pm_install} pip-completion
#${pm_install} pkg-config
#${pm_install} protobuf
${pm_install} rsync
#${pm_install} ruby-completion
#{pm_install} rust
${pm_install} screen
${pm_install} shellcheck
${pm_install} sloccount
${pm_install} socat
${pm_install} sqlite
${pm_install} srecord
#${pm_install} ssh-copy-id
#${pm_install} stdman
${pm_install} stow
#${pm_install} stress
#${pm_install} subgit
#${pm_install} swig
${pm_install} tcpdump
#${pm_install} tcpflow
#${pm_install} tcping
${pm_install} tcpreplay
#${pm_install} tcptrace
${pm_install} tcptraceroute
#${pm_install} tcptrack
#${pm_install} termshare
#${pm_install} terraform
${pm_install} texlive
${pm_install} tig
${pm_install} tmux
${pm_install} tree
${pm_install} unzip
#${pm_install} v8
#${pm_install} vault
#${pm_install} vegeta
${pm_install} vim
#${pm_install} visual-studio-code
#${pm_install} webp
${pm_install} wget
#${pm_install} wireshark
${pm_install} xauth
#${pm_install} xctool
${pm_install} xdg-utils
#${pm_install} xmlformat
#${pm_install} xmlstarlet
#${pm_install} xmlto

# cleanup
sudo apt-get -q -y autoremove
${pm_cleanup}
